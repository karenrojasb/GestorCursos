const handleInscribir = async (idCur: number) => {
  setInscribiendo(true);
  setErrorInscripcion(null);

  // Obtener el usuario autenticado desde localStorage
  const docInscr = localStorage.getItem("docInscr");

  console.log("Valor de docInscr desde localStorage:", docInscr); // <-- Verifica qué se está obteniendo

  if (!docInscr || docInscr === "undefined" || docInscr === "null") {
    alert("Error: No se encontró el usuario autenticado. Inicie sesión nuevamente.");
    setInscribiendo(false);
    return;
  }

  const fecreg = new Date().toISOString().split("T")[0];

  try {
    const response = await fetch("http://localhost:8090/api/inscripciones", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ idCur, docInscr, est: true, fecreg }),
    });

    if (!response.ok) {
      throw new Error("Error al inscribirse en el curso");
    }

    alert("Inscripción realizada con éxito.");
  } catch (error) {
    console.error("Error en la inscripción:", error);
    setErrorInscripcion("No se pudo completar la inscripción, inténtelo nuevamente.");
  } finally {
    setInscribiendo(false);
  }
};