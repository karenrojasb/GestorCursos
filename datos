import { Injectable } from '@nestjs/common';
import { PrismaService } from '../prisma.service';

@Injectable()
export class UsuarioService {
  constructor(private prisma: PrismaService) {}

  async registrarUsuario(id_emp: string) { // id_emp ahora es string
    const usuarios = await this.prisma.$queryRaw<any[]>`
      SELECT id_emp, nombre, publico, e_mail 
      FROM gescur.emp_nomina 
      WHERE id_emp = TRIM(${id_emp})`; // Se usa TRIM para eliminar espacios

    if (!usuarios || usuarios.length === 0) {
      return { message: 'Usuario no encontrado', registrado: false };
    }

    return { message: 'Registro exitoso', registrado: true, usuario: usuarios[0] };
  }
}