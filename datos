import { Injectable } from '@nestjs/common';
import { PrismaService } from '../prisma.service';

@Injectable()
export class UsuarioService {
  constructor(private prisma: PrismaService) {}

  async iniciarSesion(id_emp: string) {
    const usuario = await this.prisma.$queryRaw<any[]>`
      SELECT id_emp, nom_emp AS nombre, publico, e_mail 
      FROM gescur.emp_nomina 
      WHERE id_emp = TRIM(${id_emp})`;

    if (usuario.length > 0) {
      return usuario[0]; // Devuelve el primer usuario encontrado
    } else {
      return { mensaje: 'Usuario no encontrado' };
    }
  }
}