useEffect(() => {
  const fetchCursos = async () => {
    if (!idEmp) {
      console.log("‚õî No hay idEmp, no se hace la petici√≥n.");
      return;
    }

    try {
      console.log(`üì° Haciendo petici√≥n a: http://localhost:8090/api/cursos/usuario/${idEmp}`);
      const response = await fetch(`http://localhost:8090/api/cursos/usuario/${idEmp}`);
      
      console.log("üîÑ Estado de la respuesta:", response.status);
      
      if (!response.ok) throw new Error(`Error HTTP: ${response.status}`);
      
      const data = await response.json();
      console.log("üì© Respuesta del backend:", data);

      if (data.success) {
        const hoy = new Date();
        const cursosActivos = data.cursos.filter((curso: Curso) => 
          !curso.Fin || new Date(curso.Fin) >= hoy
        );

        console.log("üìö Cursos activos:", cursosActivos);

        setTimeout(() => {
          setCursos(cursosActivos);
          setCursosFiltrados(cursosActivos);
          setIsLoading(false);
        }, 1000);
      } else {
        throw new Error("No se pudieron obtener los cursos.");
      }
    } catch (error) {
      console.error("‚ùå Error al obtener los cursos:", error);
      setIsLoading(false);
    }
  };

  const storedIdEmp = localStorage.getItem("id_emp");
  console.log("üìå ID del usuario guardado en localStorage:", storedIdEmp);

  if (storedIdEmp) {
    setIdEmp(Number(storedIdEmp));
  }

  if (idEmp) fetchCursos();
}, [idEmp]);