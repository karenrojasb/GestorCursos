const notas = await this.prisma.notas.findMany({
  where: {
    idInscrito: idInscritoInt,
  },
  include: {
    Listas: true, // Se incluye para acceder a la Especificacion
  },
});

const notasConCurso = await Promise.all(
  notas.map(async (nota) => {
    const curso = await this.prisma.cursos.findFirst({
      where: { id: nota.idCurso },
      select: {
        NombreCurso: true,
        Lugar: true,
        Inicio: true,
        Fin: true,
        LunesIni: true,
        LunesFin: true,
        MartesIni: true,
        MartesFin: true,
        MiercolesIni: true,
        MiercolesFin: true,
        JuevesIni: true,
        JuevesFin: true,
        ViernesIni: true,
        ViernesFin: true,
        SabadoIni: true,
        SabadoFin: true,
        Profesor: true,
        SegundoPro: true,
        Proexterno: true,
      },
    });

    const [profesor] = await this.prisma.$queryRaw<{ nombre: string }[]>`
      SELECT nombre FROM gescur.emp_nomina WHERE id_emp = CAST(${curso?.Profesor} AS VARCHAR)`;

    const [segundoPro] = await this.prisma.$queryRaw<{ nombre: string }[]>`
      SELECT nombre FROM gescur.emp_nomina WHERE id_emp = CAST(${curso?.SegundoPro} AS VARCHAR)`;

    return {
      ...nota,
      NombreCurso: curso?.NombreCurso ?? null,
      Lugar: curso?.Lugar ?? null,
      Inicio: curso?.Inicio ?? null,
      Fin: curso?.Fin ?? null,
      LunesIni: curso?.LunesIni ?? null,
      LunesFin: curso?.LunesFin ?? null,
      MartesIni: curso?.MartesIni ?? null,
      MartesFin: curso?.MartesFin ?? null,
      MiercolesIni: curso?.MiercolesIni ?? null,
      MiercolesFin: curso?.MiercolesFin ?? null,
      JuevesIni: curso?.JuevesIni ?? null,
      JuevesFin: curso?.JuevesFin ?? null,
      ViernesIni: curso?.ViernesIni ?? null,
      ViernesFin: curso?.ViernesFin ?? null,
      SabadoIni: curso?.SabadoIni ?? null,
      SabadoFin: curso?.SabadoFin ?? null,
      ProExterno: curso?.Proexterno ?? null,
      Profesor: curso?.Profesor ?? null,
      SegundoPro: curso?.SegundoPro ?? null,
      ProfesorNombre: profesor?.nombre ?? null,
      SegundoProNombre: segundoPro?.nombre ?? null,
      Especificacion: nota.Listas?.Especificacion ?? null, // ðŸ’¡ AquÃ­ estÃ¡ aplanada
    };
  })
);